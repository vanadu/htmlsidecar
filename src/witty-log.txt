
05.31.2019
-----------
IN PROGRESS: Clean up structure based on flowchart.

WHat I'm seeing in the Jonas project is that appController only has one public function... init. Everything else is called from that, and all the public functions are in UIController and budgetController.

So let's recap:

appController.init:
	-starts app
	-sets imgViewer to default H and W
	-displays dropArea
	-sets display toolsContainer to none
	-calls setupEventListeners
	-determines if app is in dev mode and if so, initializes Appdata for dev mode. We can ignore that for now.
	-makes sure the CCP is closed, and runs refreshAppUI to populate the dimViewers with 'no image'. 
	-runs setupEventHandlers to wait for user input. 

UIController.handleFileSelect
	-initiated by drop event
	-get the blob
	-assign the blob's filename to a variable
	-hide the drop area
	-initialize and populate Appobj with image data. The only thing that needs to be gotten here, though, is curImg. The rest - imgViewer, imgVieweport and appContainer are constants that are queried from the CSS dimensions. Maybe Appdata should be initialized and passed from appInit. 
	-set timeout of 250ms while the blob loads.
	-run onload function to ensure the blob has loaded. THis is probably redundant with the preceding instruction. Once the image has loaded:
		-hide the dropArea
		-show toolsContainer
		-show curImg
		-set Appobj.currentimg - 
		-run UIController.getAppData to get Appdata properties
		-run clipboardController.evalViewerSize to resize the image containers based on Appdata
	Once the above is complete:
	-run writeImgToDOM with the callback to create the image to the DOM based on the Appdata.
	
	This is totally convoluted!


	
	







ccpGetImgClipboardOutput				ccpGetCBImgHTML
ccpGetTdClipboardOutput					ccpGetCBTdHTML
ccpGetTableClipboardOutput				ccpGetCBTableHTML
ccpGetImgCSSClipboardOutput				ccpGetCBImgDisplayCSS
ccpGetLargePhonesCSSClipboardOutput			ccpGetCBImgLPhonesCSS
ccpGetSmallPhonesCSSClipboardOutput			ccpGetCBImgSPhonesCSS


	



TODO: Implement Mobile Swap
----------------------------
When button is not highlighted, show CCP on clipboard icon click.
When button is highlighted, show Swap Control Panel (SCP) on clipboard click.
When button is clicked, save current image data, and show mobile drop area. When mobile image is loded, put data in Appdatamob. Arrows are displayed to left and right of dim viewers to allow switching back and forth from desktop to mobile image. 



TODO: pull handleUserAction out to separate function
TODO: Implement Td and table copy to clipboard buttons.
TODO: FIX- When you focus on td or table input, the CSS CLipboard buttons appear in the img tag section. They should only  appear if the focus is in the img class input.
TODO: FIX - Delay after clicking a copy-to-clipboard button is too long.
TODO: FEATURE - Image swap. THIS NEEDS TO BE HASHED OUT!
TODO: FEATURE - Make bgcolor add the hash if it's not in the value
TODO: FIX, when imgNW is greater than imgW the imgNW size flashes before resizing to the viewer size. This is probably because of the settimeout, which might not be necesssary if the onload function is running.
TODO: BEHAVIOR - THe CCP should store all the currently selected options and restore them whenever the ccp is opened. This needs to be revisited. viewerW should persist for the session. imgW and imgH should persist for the current image. I'm not sure how long the CCP options should persist.
TODO: BEHAVIOR - Assign keyboard  shortcuts
TODO: Assign  tab order


As of 01.01.19
===============

DONE: Rename 'controller' to appController
DONE: Shorten the clipboard function names and make them more descriptive and extensible:



As of 05.31.2019
----------------
DONE: FIXED - When you focus on td or table input, the CSS CLipboard buttons appear in the img tag section. They should only  appear if the focus is in the img class input.
DONE: Rename exiting CCP icons, add TD and Table CCP icons -- new copy to clipboard buts still non-functional
DONE: FInd and display the notification area, fix error an notifications display. 
DONE: When you select background image by stig in td options, it shows the include table wrapper options in table options. Fix.
DONE: Fix CPP CSS, in progress
DONE: Move img options up to make more td space
DONE: Shrink CSS buttons
DONE: Moved git repo to github
DONE: Tableoptions: move bgcolor to col 2, move include wrapper table to top of col 3 and add bgcolor & align. Change table width to input with default of imgW.  
DONE: Change TABLE width: add width checkbox that shows input with default width of imgW, and another checkbox for wrapper that shows viewerW. Add checkbox for Stig ba
DONE: Make all checkboxes under one CSS definition - Not really possible
DONE: Put error container above toolbuttons
DONE: fix select options to clipboard
DONE: Implement the CSS clipboard buttons
DONE: Fix the retina calculations: it should alert if the disk size isn't 2X the display size.
DONE: Reset the customH and customW fields on blur to their placeholders on blur when blur is on mouseclick
DONE: Fix the images on viewerW and phone input fields
DONE: fix small phones and lartge phones toolbuttons.


As of 06.23.19
---------------
06.21.19 
Branch 062119_CBMods
-- The first thing is to move getAppdata out of public appController. I want to keep getAspectRatio in appController but have all the actual DOM access in UIController.

* appController public initGetAppdata calls appController private getAppdata 
* appController private getAppdata calls UIController.queryDOM ONLY to access DOM elements and data properties. 
* getAppdata then runs any calcs necessary and returns Appdata to initGetAppdata
* initGetAppdata then returns APpdata to the calling function.

IMPORTANT: This works but getAppdata is called four times each time the page loads...not sure if that's good. Better to pass Appdata where possible than call a DOM access.
Branching to 062119_CBMods2.

06.22.19
I have the eternal problem here that func in ccpMakeClips is initialized in UIController, so any calls to it don't run it in situ but rather in it's initialized location in UIController which is not accessible from CBController public functions. I am trying to avoid a switch/case in ccpGetSnippet by integrating the function to run in the ccpMakeClipBut object. But I can't get the function to run unless I put all those functions in CBController public with a switch/case statement which defeats the whole purpose anyway.

06.23.19
Object.create doesn't copy an object, it creates an object whose prototype contains the source object. I don't know what this is good for.
Object.assign doesn't copy an object, same issue. Spent a couple days trying to make this work without switch and without putting everything into public functions. Ended up just using switch. See 






TODO: Finish reviewing and implementing write to clipboard buttons.
TODO: rewrite getAppdata to only query specific items in the array, or at least use destructuring to only make a const out of which ever Appdata property is needed in the respective function.
TOD0: Think about making getAppdata only query a specific property if possible.
TODO: Fix being able to resize viewerW smaller than imgW - current behavior is imgw resizes with viewerW. If that's the desired behavior, imgW still doesn't write the udpated width to Appdata, that needs to be fixed.
TODO: Implement Td and table copy to clipboard buttons.
TODO: Make mrk => box function...not sure where though or whether it's necessary since it's just a one-liner.
TODO: Fix error messages - they don't fade out. Loop that in with flashAppMessage
TODO: Fix bug - load 400X1000, multiple click on +50, Display Size shows 450 but the img doesn't grow...
TODO: Implement image swap 
TODO: Parent table class att only shows in CB output if Wrapper is selected, not in just the Partent table output.
TODO: Make bgcolor add the hash if it's not in the value
TODO: FIx, when imgNW is greater than imgW the imgNW size flashes before resizing to the viewer size. This is probably because of the settimeout, which might not be necesssary if the onload function is running.
TODO: THe CCP should store all the currently selected options and restore them whenever the ccp is opened -- I think. Not sure if this is the right behavior...think bout it. Probably not.
TODO: Assign keyboard  shortcuts
TODO: Assign tab order



DONE: Uncheck and Hide Wrapper table options when CCP is opened.
DONE: Fix flashAppMessage to include status messages and cleanup
DONE: Fix showElementOnInput in CCP
Merge Branch 0619FixPhonesInput
DONE: fixed sPhonesw and lPhonesW user input.
Merge fixAppMessages
DONE: Fixed, imgW field on tab doesn't reset to placeholders. 
DONE: Rewrite updateAppdata to be parameters... with key/value pairs as parameter.
DONE: Fold handleToolbarClicks into checkUserInput and rename to checkUserInput
Branch checkUserInput
DONE: Branch rewriteHandleUserAction061119
DONE: Fix that smallphones and largephones input fields show undefined and show in Appdata as pixel values.
DONE: Fix default value in viewerW field - Fixed, added to calcViewerSize
DONE: resize viewerW doesn't work Fixed, reconfigured updateAppdata to include viewerW
DONE: - imgheight and imgwidth don't work Fixed, added evalToolbarInput to follow checkUserInput
DONE: Rename UI.
DONE: Show/Hide CCP, make checkboxes functional.
*/